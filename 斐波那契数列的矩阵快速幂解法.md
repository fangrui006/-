# 斐波那契数列的矩阵快速幂解法
## 题目

斐波那契数列采用如下递归定义：
F(0) = 1;
F(1) = 1;
F(N) = F(N-1) + F(N-2)

现在给定N，请F(N)的最低6位数字。

 - 要求最差时间复杂度：O(log(N))
 - 要求最差空间复杂度：O(log(N))
```
比如，
N=8，F(8)=21，所以输出21
N=36,F(36)=14930352，所以输出后6位，也就是930352
```

## 思路

矩阵快速幂。

求整数a的n次幂，我们有递归和非递归两种解法。

（1）递归解法：利用快速幂公式

<img src="https://github.com/fangrui006/Algorithm-Data-Structure/blob/master/resources/pic/%E5%BF%AB%E9%80%9F%E5%B9%82%E5%85%AC%E5%BC%8F.png" style="border:none;">

$$
a^n = 
\begin{cases}
a^{n/2}*a^{n/2}, & \text{if n is even} \\
a^{n/2}*a^{n/2}*a, & \text{if n is odd} \\
\end{cases}
$$

（2）非递归解法：

将十进制的n用二进制表示为：
$$n_{10}=\({b_n}{b_{n-1}}...{b_1}{b_0\)_2}$$

那么利用二进制转十进制的公式，我们可以得到
$$n=2^{n}*b_{n}+2^{n-1}*b_{n-1}+...+2^{1}*b_{1}+2^{0}*b_{0}$$

那么有
$${a^n}=a^{2^{n}*b_n}*a^{2^{n-1}*b_{n-1}}\*...\*a^{2^{1}*b_1}*a^{2^{0}*b_0}$$

为了计算得到$a^n$，我们只需要依次计算$a^{2^{0}*b_0}$，$a^{2^{1}*b_1}$，……，$a^{2^{n-1}*b_{n-1}}$，$a^{2^{n}*b_n}$。由于$b_i (0 \le {i} \le {n})$取值是0或者1，所以实际上我们只用依次计算$a^{2^{0}}$，$a^{2^{1}}$，……，$a^{2^{n}}$，也就是$a^{1}$，$a^{2}$，$a^{4}$，$a^{8}$，$a^{16}$，……，$a^{2^{n}}$。计算过程中我们对其中$b_i=1$的指数项累乘，最后的累乘结果就是$a^n$。

我们发现后一项是前一项的平方，所以最终循环次数是n次，时间复杂度是O(log(N))

比如，我们要计算$3^{10}$。我们将10表示成十进制就是1010，那么我们依次计算$3^1$，$3^2$，$3^4$，$3^8$。我们有$3^{10}=3^{2}*3^8$。

## 参考

[矩阵快速幂求Fibonacci数列](http://www.cnblogs.com/dongsheng/archive/2013/06/02/3114073.html)

[如何在github的markdown文件中插入公式](http://www.wanguanglu.com/2016/07/18/github-markdown-equation/)

[chrome扩展程序-让github显示MathJax公式](http://www.wanguanglu.com/2016/07/18/github-markdown-equation/)

[MathJax语法](https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference/5044)
