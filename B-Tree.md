# B-Tree
B-树，就是B树，它们是B-Tree的两种中文翻译结果。
## 定义
满足如下性质的树称为m阶B树：
 - 任意一个结点最多有m （m >= 2）个孩子
 - 除了根节点和叶子结点（叶子是指NULL结点）外，其他结点至少有ceil(m/2)个孩子
 - 根节点至少有2个孩子结点
 - 所有叶子结点都出现在同一层
 - 结点构成：包含n个关键字和n+1个孩子指针组成的序列如下：P0, K1, P1, K2, P2... , Kn, Pn。（其中，Ki是按照升序排列的，Pi指向的左子树中所有元素取值范围是(Ki-1, Ki)）。由于孩子个数的限制，所以除了根节点和叶子结点，其他结点关键字的个数满足ceil(m/2)-1 <= n <= m-1 

## B树插入操作
我们在插入过程中，需要保持：除了根节点和叶子结点（NULL结点），其他结点关键字的个数满足ceil(m/2)-1 <= n <= m-1。
1. 通过查找，新插入的元素会定位到叶子结点
2. 如果叶子结点关键字个数没满，直接插入即可；否则，我们将插入后的结点的中间关键字上移到父节点中，同时大于中间关键字的一半关键字被分裂到相邻的右节点
3. 经过上面的分裂，我们需要向父节点插入一个新关键字，如果此时父节点关键字也满了，也需要执行和上一步相同的操作（根节点同理）

## B树删除操作
我们在删除过程中，也需要保持：除了根节点和叶子结点（NULL结点），其他结点关键字的个数满足ceil(m/2)-1 <= n <= m-1。
1. 查找待删除关键字的左右孩子是不是叶子结点。如果是，直接删除该关键字，把该关键字右边的关键字统一左移一位；如果不是，需要向左孩子或者右孩子借一个关键字。可以选择将左孩子的最右关键字或者右孩子的最左关键字上移。
2. 经过上一步操作，有的结点关键字个数变少了，我们需要检查关键字个数是否小于下界ceil(m/2)-1
3. 如果结点的关键字个数小于下界，分两种情况：
  - 当前结点的左兄弟或者右兄弟结点关键字个数很丰满，超过下界的个数。假设右兄弟节点很丰满，那我们借用父节点一个关键字，同时将右兄弟的最左关键字上移到父节点。同时，我们需要调整右兄弟的最左子树的位置，把它移动到当前结点的最右子树位置。调整结束。
  - 当前结点的兄弟结点关键字个数很稀缺，刚好达到下界的个数。此时，我们需要合并当前结点和一个兄弟结点。父节点的一个关键字也需要下移参与合并。这样，父节点的关键字个数少了一个，我们需要重复Step 3，直到调整到根节点位置。
  
  
## 参考资料：
1. [July-B树](http://yun.baidu.com/s/1jGwup5k)
